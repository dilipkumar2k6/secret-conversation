# Secret Conversation
- Secret Conversations provides end-to-end encryption for messages using keys that are only available on users’ devices
-  Secret Conversations uses a different transport protocol, specialised on-device storage and separate back-end infrastructure
- Secret Conversations relies upon the Signal Protocol
    - Messenger uses Signal Protocol’s implementation as available in the opensource libsignal-protocol-java and libsignal-protocol-c libraries for Android and iOS respectively.
-  Secret Conversations also incorporates new abuse-reporting features which are not present other platforms which use the Signal Protocol.
# Transport protocol 
- Secret Conversations is a device-to-device conversation mode
- Messages are only accessible from the two devices which participate in a conversation
- This differs from regular Messenger conversations
where users are typically logged in with the same account in multiple devices and browser instances.
- To use Secret Conversations users designate a preferred device upon which their secret conversations will be available, e.g. their primary phone.
## Key
- Each device manages various cryptographic keys. 
- All keys are generated or derived on-device. 
- Private keys are never sent to Server.
### Public keys 
Each device uses the following public-secret keypairs
- The Identity Key keypair - long term
- The Signed Pre-Key keypair - short term and rotated periodically
- The One-Time Pre-Key keypairs - generated in batches by clients
- The Ephemeral Key keypairs - A new ephemeral keypair is generated for each round of communication within a secret conversation and is subsequently discarded.
### Session keys
When starting a secret conversation the participating devices derive symmetric session keys
- The Root Key
- Chain Keys
- Message Keys
## Conversation Initiation
Each secret conversation consists of two devices:
- one Initiator device 
- one Responder device

To create a new conversation:
- The Initiator obtains from Facebook IKR pk, SPKR pk and OTPKR pk for one one-time pre-key keypair generated by the Responder device.

## Message exchange
- Each message in Secret Conversations is encrypted with AES·CBC and authenticated using HMAC·SHA256.
## Image Attachments
If a message includes images they are encrypted and uploaded to Facebook. For each image, the sender:
- Generates a pseudorandom 256-bit AES key K and a 96-bit pseudorandom Initialization Vector IV
